/* ===========================================================
   PakelMeet - REWORKED style.css (solid black, no sliders, responsive)
   - Solid black background
   - Video-first responsive grid (auto-fit) -> no horizontal slider
   - Tiles use aspect-ratio so they always fit and do not overflow
   - Sidebar compact; chat scrolls inside its area (vertical only)
   - Accessibility & mobile-friendly controls
   - Place in: assets/css/style.css (replace previous)
   =========================================================== */

/* ---------------------------
   VARIABLES (tweak here)
   --------------------------- */
:root{
  /* Colors: solid dark theme */
  --black: #000000;         /* page background (solid) */
  --panel: #070707;         /* card background (nearly black) */
  --panel-2: #0b0b0b;       /* slightly lighter panel */
  --muted: #9aa6b3;
  --text: #eceff3;
  --accent: #2fc7f2;
  --accent-2: #2bb3e6;
  --danger: #ff5c5c;

  /* Layout */
  --max-width: 1200px;
  --sidebar-w: 320px;
  --gap: 14px;
  --radius: 10px;

  /* Tile sizing: minimum ideal tile width */
  --tile-min: 220px;       /* min width for a tile (changes grid wrapping) */
  --tile-max: 420px;       /* max comfortable tile width */

  /* UI */
  --control-h: 44px;
  --shadow: 0 10px 30px rgba(0,0,0,0.65);

  --easing: cubic-bezier(.2,.9,.2,1);
  --fast: 150ms;
}

/* ---------------------------
   Global reset & page-level
   --------------------------- */
* { box-sizing: border-box; }
html,body { height:100%; }
body{
  margin:0;
  background: var(--black);       /* SOLID BLACK */
  color: var(--text);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.35;
  font-size:15px;
  overflow-x: hidden;             /* prevent any horizontal slider */
}

/* make sure no element causes horizontal overflow by default */
img,video,svg { max-width:100%; height:auto; display:block; }
a { color: var(--accent); text-decoration: none; }

/* visually-hidden helper */
.visually-hidden {
  position:absolute!important;
  height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;
}

/* ---------------------------
   App container & header
   --------------------------- */
#app {
  max-width: var(--max-width);
  margin: 18px auto;
  padding: 16px;
  display:block;
  gap: var(--gap);
}

.site-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom: 12px;
  padding: 6px 2px;
}
.brand h1{
  margin:0;
  font-size:20px;
  font-weight:700;
  color: var(--text);
}
.brand h1 small{ font-weight:600; font-size:12px; color:var(--muted); margin-left:8px; }

/* ---------------------------
   Card style (dark, crisp)
   --------------------------- */
.card {
  background: var(--panel);
  border-radius: var(--radius);
  padding:12px;
  border: 1px solid rgba(255,255,255,0.025);
  box-shadow: var(--shadow);
}

/* small helpers */
.label{ display:block; margin-bottom:6px; color:var(--muted); font-size:13px; }
.hint{ color:var(--muted); font-size:13px; margin-top:6px; }
.small{ color:var(--muted); font-size:12px; }

/* ---------------------------
   Layout: main content + sidebar
   - Left column (video area) priority; right column sidebar fixed
   - We use minmax for left so it never shrinks too small
   --------------------------- */
main#main {
  display: grid;
  grid-template-columns: minmax(640px, 1fr) var(--sidebar-w);
  gap: 18px;
  align-items: start;
  width: 100%;
}

/* Stack on narrower screens */
@media (max-width: 920px) {
  main#main { grid-template-columns: 1fr; }
}

/* ---------------------------
   Room controls: consistent spacing
   --------------------------- */
.room-controls { display:flex; flex-direction:column; gap:12px; }
.room-form { display:flex; gap:12px; align-items:flex-end; width:100%; }
.room-form .form-field { flex:1; display:flex; flex-direction:column; gap:6px; }
.room-form input[type="text"]{
  width:100%;
  padding:10px 12px;
  border-radius: 10px;
  background: transparent;
  border: 1px solid rgba(255,255,255,0.03);
  color:var(--text);
  font-size:14px;
}
.room-form input::placeholder{ color: rgba(255,255,255,0.16); }

.room-form .actions{ display:flex; gap:8px; align-items:center; }
.button{
  display:inline-flex; align-items:center; justify-content:center;
  padding:10px 14px; height:var(--control-h); border-radius:10px;
  background: #0f2a32; color:var(--text); border:0; cursor:pointer;
  font-weight:700; transition: transform var(--fast) var(--easing), box-shadow var(--fast);
}
.button.primary{ background: linear-gradient(180deg,#0f5f78,#074f61); }
.button.danger{ background: linear-gradient(180deg,#5a2328,#361214); }
.button:active{ transform: translateY(1px); }
.button[disabled]{ opacity:.5; cursor:not-allowed; }

/* Share url text subtle */
.share-url{ color:var(--muted); font-size:13px; margin-top:6px; word-break: break-all; }

/* ---------------------------
   VIDEO AREA (video-first)
   Key: use auto-fit grid so tiles wrap, no horizontal scroll
   --------------------------- */
.video-section{ display:flex; flex-direction:column; gap:12px; width:100%; }

/* Videos grid:
   - auto-fit tries to fill each row with as many tiles as fit
   - minmax ensures each tile never gets smaller than --tile-min
   - aspect-ratio on .vid ensures height adjusts automatically
*/
.videos {
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(auto-fit, minmax(clamp(180px, 28vw, var(--tile-max)), 1fr));
  align-items: start;
  width:100%;
  padding: 8px;
  border-radius: var(--radius);
  background: var(--panel-2);         /* distinct but dark */
  border: 1px solid rgba(255,255,255,0.02);
  /* allow vertical scrolling of page, but prevent internal horizontal scrolling */
  overflow-x: hidden;
  overflow-y: visible;
}

/* Remove hard min-height to avoid causing scrollbars â€” tiles define visual size */
.videos:empty { min-height: 260px; display:flex; align-items:center; justify-content:center; color:var(--muted); }

/* Video tile: each tile uses aspect-ratio so heights are predictable */
.vid {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;                /* preserves video aspect */
  border-radius: 10px;
  overflow: hidden;
  background: #000;
  border: 1px solid rgba(255,255,255,0.02);
  display:flex; align-items:center; justify-content:center;
  transition: transform var(--fast) var(--easing), box-shadow var(--fast);
}

/* ensure video element fills tile perfectly */
.vid video {
  width: 100%;
  height: 100%;
  object-fit: cover;                  /* crop to cover tile without distortion */
  display:block;
  background: black;
}

/* overlay elements */
.vid .name {
  position:absolute; left:10px; bottom:10px;
  padding:6px 10px; border-radius:999px;
  background: rgba(0,0,0,0.5); color:var(--text);
  font-size:13px; backdrop-filter: blur(4px);
}
.vid .badges { position:absolute; right:10px; bottom:10px; display:flex; gap:8px; }
.badge { background: rgba(0,0,0,0.45); padding:6px 8px; border-radius:999px; color:var(--muted); font-size:12px; }
.vid.muted { opacity:.6; }
.vid .muted-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:var(--muted); background: rgba(0,0,0,0.45); }

/* active speaker visual */
.vid.active { outline: 3px solid rgba(47,199,242,0.08); box-shadow: 0 20px 50px rgba(47,199,242,0.03); transform: translateY(-4px); }

/* keyboard focus */
.vid:focus { outline: none; box-shadow: 0 12px 36px rgba(0,0,0,0.6); }

/* ---------------------------
   Controls row: stable below videos
   --------------------------- */
.controls {
  display:flex;
  gap:12px;
  justify-content:center;
  align-items:center;
  padding: 6px 4px;
  width:100%;
}
.controls .button { min-width: 120px; }
@media (max-width:520px) {
  .controls { flex-direction: column; width:100%; gap:10px; }
  .controls .button { width:100%; min-width: unset; }
}

/* ---------------------------
   SIDEBAR (secondary, compact)
   - sidebar content scrolls internally if tall, to avoid page horizontal scroll
   --------------------------- */
.sidebar {
  display:flex;
  flex-direction:column;
  gap:12px;
  min-width: 180px;
  max-width: var(--sidebar-w);
}

/* make sidebar cards lighter contrast and allow internal scrolling */
.sidebar .card {
  background: var(--panel);
  padding:12px;
  border-radius: var(--radius);
  box-shadow: none;
  border: 1px solid rgba(255,255,255,0.02);
}

/* profile input */
.profile input {
  width:100%; padding:10px; border-radius:8px;
  border:1px solid rgba(255,255,255,0.03); background: transparent; color:var(--text);
}

/* chat: intentionally smaller, overflow inside chat box (vertical only) */
.chat-box {
  height: 200px;               /* smaller, consistent */
  max-height: 40vh;
  min-height: 120px;
  overflow-y: auto;
  overflow-x: hidden;
  padding:8px;
  border-radius:8px;
  background: rgba(255,255,255,0.01);
  border: 1px solid rgba(255,255,255,0.02);
}

/* ensure chat aria-live messages appear and auto-scroll via JS */
.chat-box .msg { margin:8px 0; }
.chat-box .meta { font-size:12px; color:var(--muted); }

/* chat form compact */
.chat-form{ display:flex; gap:8px; margin-top:8px; align-items:center; }
.chat-form input[type="text"]{ flex:1; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:var(--text); }
.chat-form button { padding:8px 12px; border-radius:8px; }

/* status box */
.status #status { padding:10px; border-radius:8px; background: rgba(255,255,255,0.01); color:var(--muted); border:1px dashed rgba(255,255,255,0.02); }

/* ---------------------------
   FOOTER
   --------------------------- */
.site-footer { margin-top:18px; color:var(--muted); font-size:13px; text-align:center; }

/* ---------------------------
   Accessibility focus styles
   --------------------------- */
:focus { outline: 2px solid rgba(47,199,242,0.10); outline-offset:2px; }
button:focus-visible, input:focus-visible {
  box-shadow: 0 0 0 4px rgba(47,199,242,0.06);
  border-radius:8px;
}

/* ---------------------------
   No-horizontal-scroll safeguard (extra)
   - prevents accidental overflow from borders/margins
   --------------------------- */
html, body, #app, main#main { max-width: 100%; overflow-x: hidden; }

/* ---------------------------
   Responsive tweaks
   --------------------------- */
@media (max-width: 1100px) {
  main#main { grid-template-columns: 1fr var(--sidebar-w); }
  .videos { grid-template-columns: repeat(auto-fit, minmax(clamp(180px, 36vw, var(--tile-max)), 1fr)); }
}
@media (max-width: 920px) {
  main#main { grid-template-columns: 1fr; }
  .sidebar { width:100%; max-width:none; order:2; }
  .video-section { order:1; }
  .videos { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
}

/* ---------------------------
   Performance / motion preference
   --------------------------- */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* ---------------------------
   Micro polish
   - subtle enter animation that won't cause layout shift
   --------------------------- */
@keyframes softPop {
  from { opacity: 0; transform: translateY(6px) scale(.998); } 
  to { opacity: 1; transform: none; }
}
.vid { animation: softPop 220ms var(--easing) both; }

/* ---------------------------
   Notes for JS integration:
   - JS should:
     * add class participants-N to #videos (1..9) if desired for alternative layout logic
     * mount tiles as children of #videos with class .vid and <video> inside
     * use .vid.muted and .vid.active states for visuals
     * keep only vertical scrolling; horizontal scroll should never appear
   --------------------------- */

/* End of reworked style.css */
